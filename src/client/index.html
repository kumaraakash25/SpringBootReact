<html>
<head>
    <script src="https://unpkg.com/react@15/dist/react.min.js"></script>
    <script src="https://unpkg.com/react-dom@15/dist/react-dom.min.js">
    </script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
</head>
<body>
<div id="root"></div>
<script type="text/babel">

interface Student{
    id: number,
    name: string;
    age: number;
}

interface AppState{
    students: Array<Student>;
    isLoading: boolean;
}

interface AppProps{
}

class App extends React.Component<AppState>{
constructor(props) {
    super(props);
    this.state = {
      students: [],
      isLoading: false
    };
  }

  deleteItem(studentId) {
      fetch('http://localhost:8080/'+studentId, {
			method: 'DELETE'
		})
		.then(this.componentDidMount());
		this.forceUpdate();
  }

  render() {
  const {students, isLoading} = this.state;

  if (isLoading) {
    return <p>Loading...</p>;
  }

  return (
    <div className="App">
      <div>
        <h2>Student List</h2>


        <table>
    <tr>
          {students.map((student: Student) =>
          <div key={student.id}>
             <td>{student.name}</td>
             <td>{student.age}</td>
             <td><input type="button" value="Delete"  onClick={() => this.deleteItem(student.id)}/>
             </td>
          </div>
        )}
    </tr>
        </table>
      </div>
    </div>
  );
}

componentDidMount() {
  this.setState({isLoading: true});

  fetch('http://localhost:8080/')
    .then(response => response.json())
    .then(data => this.setState({students: data, isLoading: false}));
}

}
ReactDOM.render(<App />, document.getElementById("root"));

</script>
</body>
</html>




